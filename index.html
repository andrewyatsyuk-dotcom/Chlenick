<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üå± –í–∏—Ä–æ—â—É–π</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, sans-serif;
      max-width: 400px;
      margin: 0 auto;
      padding: 1.5rem;
      background: #1a1a2e;
      color: #eee;
      min-height: 100vh;
    }
    h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
    .growth {
      font-size: 2.5rem;
      font-weight: bold;
      color: #4ade80;
      margin: 1rem 0;
    }
    .vis-bar {
      height: 12px;
      background: #333;
      border-radius: 6px;
      overflow: hidden;
      margin-bottom: 1.5rem;
    }
    .vis-fill {
      height: 100%;
      background: linear-gradient(90deg, #4ade80, #22c55e);
      border-radius: 6px;
      transition: width 0.3s;
    }
    .actions { display: flex; flex-direction: column; gap: 0.75rem; }
    button {
      padding: 0.9rem 1rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.1s, opacity 0.2s;
    }
    button:active { transform: scale(0.98); }
    button:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    .water { background: #3b82f6; color: white; }
    .haircut { background: #a855f7; color: white; }
    .watch { background: #ec4899; color: white; }
    .reset { background: #444; color: #aaa; font-size: 0.9rem; }
    .hint { font-size: 0.85rem; color: #888; margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>üå± –í–∏—Ä–æ—â—É–π</h1>
  <div class="growth" id="growth">0.0 —Å–º</div>
  <div class="vis-bar"><div class="vis-fill" id="fill" style="width: 0%"></div></div>
  <div class="actions">
    <button class="water" onclick="water()">üíß –ü—ñ–¥–ª–∏—Ç–∏ (+0.5 —Å–º)</button>
    <button class="haircut" id="haircutBtn" onclick="haircut()">‚úÇÔ∏è –°—Ç—Ä–∏–≥—Ç–∏ –≤–æ–ª–æ—Å—Å—è (+2 —Å–º, —Ä–∞–∑ –Ω–∞ 24 –≥–æ–¥)</button>
    <button class="watch" onclick="watchContent()">üì∫ –î–∏–≤–∏—Ç–∏—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç (+0.3 —Å–º)</button>
    <button class="reset" onclick="resetGame()">üîÑ –°–∫–∏–Ω—É—Ç–∏</button>
  </div>
  <p class="hint" id="hint"></p>

  <script>
    const KEY = 'growth_game';
    const MAX = 100;
    const WATER = 0.5, HAIRCUT_BOOST = 2, WATCH = 0.3;
    const HAIRCUT_COOLDOWN_MS = 24 * 60 * 60 * 1000;

    function load() {
      try {
        const s = localStorage.getItem(KEY);
        return s ? JSON.parse(s) : { growth: 0, lastHaircut: null, watchCount: 0 };
      } catch { return { growth: 0, lastHaircut: null, watchCount: 0 }; }
    }

    function save(data) {
      localStorage.setItem(KEY, JSON.stringify(data));
      render(data);
    }

    function canHaircut(data) {
      if (!data.lastHaircut) return true;
      return Date.now() - new Date(data.lastHaircut).getTime() >= HAIRCUT_COOLDOWN_MS;
    }

    function render(data) {
      const g = data.growth;
      document.getElementById('growth').textContent = g.toFixed(1) + ' —Å–º';
      document.getElementById('fill').style.width = Math.min(100, (g / MAX) * 100) + '%';
      const btn = document.getElementById('haircutBtn');
      btn.disabled = !canHaircut(data);
      btn.title = canHaircut(data) ? '–î–æ—Å—Ç—É–ø–Ω–æ!' : '–©–µ —Ä–∞–∑ –Ω–∞ 24 –≥–æ–¥–∏–Ω–∏';
      let hint = '';
      if (data.lastHaircut && !canHaircut(data)) {
        const next = new Date(new Date(data.lastHaircut).getTime() + HAIRCUT_COOLDOWN_MS);
        hint = '–°—Ç—Ä–∏–∂–∫–∞: ' + next.toLocaleTimeString('uk-UA', { hour: '2-digit', minute: '2-digit' });
      }
      document.getElementById('hint').textContent = hint;
    }

    function water() {
      const d = load();
      d.growth = Math.min(MAX, d.growth + WATER);
      save(d);
    }

    function haircut() {
      const d = load();
      if (!canHaircut(d)) return;
      d.growth = Math.min(MAX, d.growth + HAIRCUT_BOOST);
      d.lastHaircut = new Date().toISOString();
      save(d);
    }

    function watchContent() {
      const d = load();
      d.growth = Math.min(MAX, d.growth + WATCH);
      d.watchCount = (d.watchCount || 0) + 1;
      save(d);
    }

    function resetGame() {
      if (!confirm('–°–∫–∏–Ω—É—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å?')) return;
      save({ growth: 0, lastHaircut: null, watchCount: 0 });
    }

    render(load());
  </script>
</body>
</html>
